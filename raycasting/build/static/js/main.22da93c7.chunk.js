(this.webpackJsonpraycasting=this.webpackJsonpraycasting||[]).push([[0],{47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var a=n(5),i=n(0),s=n.n(i),o=n(9),r=n.n(o),h=(n(47),n(48),n(15)),c=n(16),l=n(38),d=n(37),u=(n(49),function(){function t(e,n,a,i){Object(h.a)(this,t),this.startPoint={x:e,y:n},this.endPoint={x:a,y:i}}return Object(c.a)(t,[{key:"show",value:function(){var t=document.getElementById("2d-plane").getContext("2d");t.beginPath(),t.moveTo(this.startPoint.x,this.startPoint.y),t.lineTo(this.endPoint.x,this.endPoint.y),t.lineWidth=1,t.strokeStyle="white",t.stroke()}}]),t}()),y=function(){function t(e,n){Object(h.a)(this,t),this.pos=e,this.direction=n}return Object(c.a)(t,[{key:"setAngel",value:function(t){this.direction.x=t.x,this.direction.y=t.y}},{key:"getAngle",value:function(t){var e=t*Math.PI/180;return{x:0*Math.cos(e)-1*Math.sin(e),y:1*Math.cos(e)+0*Math.sin(e)}}},{key:"show",value:function(){var t=document.getElementById("2d-plane").getContext("2d");t.beginPath(),t.moveTo(this.pos.x,this.pos.y),t.lineTo(this.pos.x+this.direction.x,this.pos.y+this.direction.y),t.lineWidth=1,t.stroke()}},{key:"cast",value:function(t){var e=t.startPoint.x,n=t.startPoint.y,a=t.endPoint.x,i=t.endPoint.y,s=this.pos.x,o=this.pos.y,r=this.pos.x+this.direction.x,h=this.pos.y+this.direction.y,c=(e-a)*(o-h)-(n-i)*(s-r);if(0!==c){var l=((e-s)*(o-h)-(n-o)*(s-r))/c;return l>0&&l<1&&-((e-a)*(n-o)-(n-i)*(e-s))/c>0?{x:e+l*(a-e),y:n+l*(i-n)}:void 0}}}]),t}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;Object(h.a)(this,t),this.pos={x:e,y:n},this.rays=[],this.heading=0,this.view_Range=a;for(var i=-a;i<a;i+=1){var s=this.getAngle(i);this.rays.push(new y(this.pos,s))}}return Object(c.a)(t,[{key:"move",value:function(t){var e=this.getAngle(this.heading);this.pos.x+=t*e.x,this.pos.y+=t*e.y}},{key:"rotate",value:function(t){this.heading+=t;for(var e=0,n=-this.view_Range;n<this.view_Range;n++){var a=this.getAngle(n+this.heading);this.rays[e].setAngel(a),e++}}},{key:"getAngle",value:function(t){var e=t*Math.PI/180;return{x:0*Math.cos(e)-1*Math.sin(e),y:1*Math.cos(e)+0*Math.sin(e)}}},{key:"getDistance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"update",value:function(t,e){this.pos.x=t,this.pos.y=e}},{key:"look",value:function(t){for(var e=[],n=document.getElementById("2d-plane").getContext("2d"),a=0;a<this.rays.length;a++){for(var i=null,s=1/0,o=0;o<t.length;o++){var r=this.rays[a].cast(t[o]);if(r){var h=this.getDistance(this.pos,r);h<s&&(s=h,i=r)}}i&&(n.beginPath(),n.moveTo(this.rays[a].pos.x,this.rays[a].pos.y),n.lineTo(i.x,i.y),n.strokeStyle="rgba(255,255,255,2)",n.stroke(),n.strokeStyle="black"),e[a]=s}return e}},{key:"show",value:function(){var t=document.getElementById("2d-plane").getContext("2d");t.fillStyle="red",t.beginPath(),t.arc(this.pos.x,this.pos.y,3,0,2*Math.PI),t.fill();for(var e=0;e<this.rays.length;e++)this.rays[e].show()}}]),t}(),g=400;function f(t){var e=g/t.length,n=document.getElementById("3d-plane").getContext("2d");n.beginPath(),n.fillStyle="black",n.fillRect(0,0,400,400),n.stroke();for(var a=0;a<t.length;a++){var i=b(t[a]*t[a],0,16e4,255,0),s=b(t[a],0,g,400,0);n.fillStyle="rgb(".concat(i,",").concat(i,",").concat(i,")"),n.beginPath();var o=400-s;n.fillRect(a*e,o/2,e+2,s),n.stroke()}}function p(){var t=document.getElementById("3d-plane").getContext("2d");t.beginPath(),t.fillStyle="black",t.fillRect(0,0,400,400),t.stroke()}function b(t,e,n,a,i){return a+(i-a)*(t-e)/(n-e)}function x(t,e,n){var a=document.getElementById("2d-plane"),i=a.getContext("2d"),s=t?function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}(a,t):null;i.beginPath(),i.fillStyle="black",i.fillRect(0,0,400,400),i.stroke();for(var o=0;o<n.length;o++)n[o].show();s&&s.x&&e.update(s.x,s.y),e.show()}function k(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];x(t,e,n);var i=e.look(n);a?f(i):p()}function m(){!function(){var t=document.getElementById("2d-plane").getContext("2d");t.beginPath(),t.fillStyle="black",t.fillRect(0,0,400,400),t.stroke()}()}var w=n(77),j=n(76),M=n(11);n(75);var O=Object(M.a)({root:{color:"gray",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)",top:4,"& *":{background:"transparent",color:"red"}},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(w.a),P=400,C=400,R=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).state={boundary:[],particle:new v,render3d:!1,moveMode:!0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){for(var t=this.state.boundary,e=0;e<5;e++){var n=Math.floor(Math.random()*P),a=Math.floor(Math.random()*C),i=Math.floor(Math.random()*P),s=Math.floor(Math.random()*C);t.push(new u(n,a,i,s))}t.push(new u(0,0,P,0)),t.push(new u(P,0,P,C)),t.push(new u(P,C,0,C)),t.push(new u(0,C,0,0)),this.setState({boundary:t});for(var o=0;o<9;o++)t[o].show();k(null,this.state.particle,this.state.boundary,this.state.render3d)}},{key:"moveRay",value:function(t){this.state.moveMode&&k(t,this.state.particle,this.state.boundary,this.state.render3d)}},{key:"rotateView",value:function(t){this.state.moveMode||("a"===t.key&&(this.state.particle.rotate(5),k(t,this.state.particle,this.state.boundary,this.state.render3d)),"d"===t.key&&(this.state.particle.rotate(-5),k(t,this.state.particle,this.state.boundary,this.state.render3d)),"w"===t.key&&(this.state.particle.move(5),k(t,this.state.particle,this.state.boundary,this.state.render3d)),"s"===t.key&&(this.state.particle.move(-5),k(t,this.state.particle,this.state.boundary,this.state.render3d)))}},{key:"handleViewRangeChange",value:function(t,e){m();var n=new v(this.state.particle.pos.x,this.state.particle.pos.y,e);this.setState({particle:n}),k(null,this.state.particle,this.state.boundary)}},{key:"switch3DView",value:function(){var t=this;this.setState({render3d:!this.state.render3d}),setTimeout((function(){t.state.render3d?k(null,t.state.particle,t.state.boundary,t.state.render3d):p()}),20)}},{key:"switchMoveMode",value:function(){var t=this.state.particle;t.pos.x=200,t.pos.y=200,this.setState({moveMode:!this.state.moveMode,particle:t}),k(null,this.state.particle,this.state.boundary,this.state.render3d)}},{key:"render",value:function(){var t=this,e=this.state,n=e.render3d,i=e.moveMode;return Object(a.jsxs)("div",{className:"raycasting",onKeyDown:function(e){return t.rotateView(e)},children:[Object(a.jsx)("h1",{children:"Raycasting"}),Object(a.jsx)(j.a,{variant:"outlined",onClick:function(){return t.switch3DView()},children:n?"3D Render On":"3D Render Off"}),Object(a.jsx)(j.a,{variant:"outlined",onClick:function(){return t.switchMoveMode()},children:i?"Move Mouse":"Move Keyboard"}),Object(a.jsx)("h4",{children:"W: Forward, S:Backward"}),Object(a.jsx)("h4",{children:"A:Rotate(left), D:Rotate(right)"}),Object(a.jsxs)("div",{className:"raycasting__labels__slider",children:[Object(a.jsx)("h4",{children:"View Range:"}),Object(a.jsx)(O,{className:"slider",valueLabelDisplay:"on","aria-label":"pretto slider",defaultValue:30,min:1,max:180,step:1,onChange:function(e,n){return t.handleViewRangeChange(e,n)},scale:function(t){return 2*t}})]}),Object(a.jsx)("canvas",{className:"raycasting__canvas__2dplane",id:"2d-plane",width:P,height:C,onMouseMoveCapture:function(e){return t.moveRay(e)},onClick:function(e){return t.rotateView(e)},onKeyDown:function(e){return t.rotateView(e)},tabIndex:"0"}),Object(a.jsx)("canvas",{className:"raycasting__canvas__3dplane",id:"3d-plane",width:P,height:C})]})}}]),n}(s.a.Component);var S=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(R,{})})},_=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),s(t),o(t)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root")),_()}},[[55,1,2]]]);
//# sourceMappingURL=main.22da93c7.chunk.js.map